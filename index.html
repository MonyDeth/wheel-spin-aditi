<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customizable Spinning Prize Wheel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .animate-pulse-zoom {
            animation: pulse-zoom 2s infinite;
        }
        @keyframes pulse-zoom {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }
        .wheel-container {
            position: relative;
            width: 500px;
            height: 500px;
        }
        @media (max-width: 768px) {
            .wheel-container {
                width: 350px;
                height: 350px;
            }
        }
        .pointer {
            width: 0;
            height: 0;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
            border-left: 25px solid red; /* Points right, gets flipped to point left */
        }
        #ad-image-container {
            position: relative;
            width: 100%;
            padding-top: 100%; /* 1:1 Aspect Ratio */
        }
        #ad-image-container img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.75rem; /* rounded-xl */
            transition: opacity 0.5s ease-in-out;
        }
        .transition-layout {
            transition: width 0.6s ease, opacity 0.6s ease; }
        .wheel-full          { width: 100% !important; }
        .ad-hidden           { width:   0   !important; opacity: 0 !important; pointer-events: none; }

    </style>
</head>
<body class="bg-gray-100 transition-all duration-500">

<div id="app-container" class="relative flex flex-col items-center min-h-screen justify-center p-4 overflow-hidden">

    <!-- Logo doubled as “Customize” button -->
    <img src="Images/ADITI-logo-long.png"
         id="open-settings-btn"
         class="absolute top-4 left-4 z-30 cursor-pointer w-40 hover:scale-105 transition-transform duration-300"
         alt="Customize">

    <!-- Wheel + Ad layout -->
    <div class="flex flex-col md:flex-row items-center min-h-screen justify-center gap-8 m-b w-full">

        <!-- ──────── Wheel (unchanged) ──────── -->
        <div class="left-container transition-layout flex w-full md:w-1/2 justify-center items-center relative">
            <div class="flex-shrink-0 relative flex items-center justify-center">
                <div class="wheel-container">
                    <canvas id="wheel-canvas" width="500" height="500"></canvas>

                    <button id="spin-btn"
                            class="absolute inset-0 m-auto w-24 h-24 bg-white rounded-full border-8 border-gray-200 text-gray-800 font-bold text-xl shadow-2xl animate-pulse-zoom flex items-center justify-center text-center transition-transform duration-200 disabled:opacity-50 disabled:animate-none">
                        SPIN
                    </button>
                </div>
                <div class="absolute left-full top-1/2 -translate-y-1/2 -ml-3 z-10 pointer rotate-180"></div>

            </div>

            <!-- Pointer on the right edge of the wheel -->
        </div>

        <!-- ──────── Advertisement banner (unchanged) ──────── -->
        <div class="right-container transition-layout flex w-full md:w-1/2 justify-center items-center" id="ad-banner">
            <div id="ad-image-container" class="w-[500px] h-[500px] flex items-center justify-center">
                <!-- Ad images will be injected here -->
            </div>
        </div>
    </div>
</div>


<!-- Prize Modal -->
<div id="prize-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-2xl shadow-2xl p-8 text-center max-w-lg w-full mx-4 transform transition-all scale-95 opacity-0">
        <h2 class="text-2xl font-bold text-gray-800 mb-2">Congratulations!</h2>

        <p class="text-gray-600 mb-4">You've won:</p>
        <img id="won-prize-image" src="" alt="Prize Image"
             class="max-w-full h-40 object-contain mx-auto mb-4 rounded-lg hidden">

        <p id="prize-result" class="text-4xl font-bold text-blue-600 mb-6"></p>

        <div id="prize-banner-container" class="mb-6 hidden">
            <img id="prize-banner-img" src="" alt="Prize Banner"
                 class="max-w-full h-auto rounded-lg mx-auto">
        </div>

        <button id="close-prize-modal"
                class="bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-blue-700 transition-transform hover:scale-105">
            Awesome!
        </button>
    </div>
</div>

<!-- Settings Modal -->
<div id="settings-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 w-full max-w-3xl mx-4 transform transition-all scale-95 opacity-0 max-h-[90vh] flex flex-col">
        <div class="flex justify-between items-center mb-6 flex-shrink-0">
            <h2 class="text-2xl font-bold text-gray-800">Customization</h2>
            <button id="close-settings-modal" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
        </div>

        <div class="border-b border-gray-200 flex-shrink-0">
            <nav class="flex -mb-px overflow-x-auto" id="settings-tabs">
                <button data-tab="prizes" class="tab-btn border-b-2 border-blue-600 text-blue-600 py-4 px-6 block hover:text-blue-600 focus:outline-none font-semibold flex-shrink-0">Prizes</button>
                <button data-tab="appearance" class="tab-btn text-gray-500 py-4 px-6 block hover:text-blue-600 focus:outline-none font-semibold flex-shrink-0">Appearance</button>
                <button data-tab="background" class="tab-btn text-gray-500 py-4 px-6 block hover:text-blue-600 focus:outline-none font-semibold flex-shrink-0">Background</button>
                <button data-tab="prize-banner" class="tab-btn text-gray-500 py-4 px-6 block hover:text-blue-600 focus:outline-none font-semibold flex-shrink-0">Prize Banner</button>
                <button data-tab="ad-banner" class="tab-btn text-gray-500 py-4 px-6 block hover:text-blue-600 focus:outline-none font-semibold flex-shrink-0">Ad Banner</button>
            </nav>
        </div>

        <div id="tab-content" class="py-6 overflow-y-auto">
            <div id="prizes-tab" class="tab-pane">
                <h3 class="font-semibold text-lg mb-4">Manage Prizes</h3>
                <div id="prize-list" class="space-y-3 mb-4 max-h-64 overflow-y-auto pr-2"></div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mt-4 border-t pt-4">
                    <input type="text" id="new-prize-name-input" placeholder="Prize Name" class="p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    <input type="text" id="new-prize-image-input" placeholder="Image URL (optional)" class="p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                </div>
                <button id="add-prize-btn" class="w-full mt-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">Add Prize</button>
                <p class="text-sm text-gray-500 mt-2">You need at least 2 prizes.</p>
            </div>
            <div id="appearance-tab" class="tab-pane hidden">
                <h3 class="font-semibold text-lg mb-4">Wheel Appearance</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div><label for="color1" class="block text-sm font-medium text-gray-700">Primary Color</label><input type="color" id="color1" value="#3b82f6" class="mt-1 block w-full h-10 rounded-lg border-gray-300"></div>
                    <div><label for="color2" class="block text-sm font-medium text-gray-700">Secondary Color</label><input type="color" id="color2" value="#ffffff" class="mt-1 block w-full h-10 rounded-lg border-gray-300"></div>
                </div>
                <h3 class="font-semibold text-lg mb-4 mt-6">Spin Duration</h3>
                <div><label for="spin-duration" class="block text-sm font-medium text-gray-700">Spin Time (seconds)</label><input type="range" id="spin-duration" min="3" max="15" value="8" class="mt-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"><div class="text-center text-gray-600 mt-1"><span id="spin-duration-value">8</span>s</div></div>
            </div>
            <div id="background-tab" class="tab-pane hidden">
                <h3 class="font-semibold text-lg mb-4">Page Background</h3>
                <p class="text-sm text-gray-600 mb-2">Enter an image URL to set as the background.</p>
                <div class="flex gap-2"><input type="text" id="bg-image-url" placeholder="https://example.com/image.jpg" class="flex-grow p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"><button id="set-bg-btn" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">Set</button></div>
                <button id="remove-bg-btn" class="mt-2 text-sm text-red-500 hover:underline">Remove Background</button>
            </div>
            <div id="prize-banner-tab" class="tab-pane hidden">
                <h3 class="font-semibold text-lg mb-4">Prize Won Banner</h3>
                <p class="text-sm text-gray-600 mb-2">Enter an image URL to show in the popup when a prize is won.</p>
                <div class="flex gap-2"><input type="text" id="prize-banner-image-url" placeholder="https://example.com/banner.jpg" class="flex-grow p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"><button id="set-prize-banner-btn" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">Set</button></div>
                <button id="remove-prize-banner-btn" class="mt-2 text-sm text-red-500 hover:underline">Remove Banner</button>
            </div>
            <div id="ad-banner-tab" class="tab-pane hidden">
                <h3 class="font-semibold text-lg mb-4">Manage Ad Banner Images</h3>
                <p class="text-sm text-gray-600 mb-2">Enter image URLs, one per line.</p>
                <textarea id="ad-banner-urls" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500" rows="4" placeholder="https://placehold.co/300x300/e2e8f0/334155?text=Ad+1&#10;https://placehold.co/300x300/3b82f6/ffffff?text=Ad+2"></textarea>
                <h3 class="font-semibold text-lg mb-2 mt-4">Image Flip Interval</h3>
                <div><label for="ad-flip-interval" class="block text-sm font-medium text-gray-700">Interval (seconds)</label><input type="range" id="ad-flip-interval" min="1" max="15" value="5" class="mt-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"><div class="text-center text-gray-600 mt-1"><span id="ad-flip-interval-value">5</span>s</div></div>
                <button id="save-ad-settings-btn" class="mt-6 w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">Save Ad Settings</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Elements ---
        const canvas = document.getElementById('wheel-canvas');
        const ctx = canvas.getContext('2d');
        const spinBtn = document.getElementById('spin-btn');
        const adBanner = document.getElementById('ad-banner');
        const adImageContainer = document.getElementById('ad-image-container');
        const prizeModal = document.getElementById('prize-modal');
        const settingsModal = document.getElementById('settings-modal');
        const prizeResult = document.getElementById('prize-result');
        const wonPrizeImage = document.getElementById('won-prize-image');
        const closePrizeModalBtn = document.getElementById('close-prize-modal');
        const openSettingsBtn = document.getElementById('open-settings-btn');
        const closeSettingsModalBtn = document.getElementById('close-settings-modal');
        const prizeListContainer = document.getElementById('prize-list');
        const newPrizeNameInput = document.getElementById('new-prize-name-input');
        const newPrizeImageInput = document.getElementById('new-prize-image-input');
        const addPrizeBtn = document.getElementById('add-prize-btn');
        const color1Input = document.getElementById('color1');
        const color2Input = document.getElementById('color2');
        const spinDurationInput = document.getElementById('spin-duration');
        const spinDurationValue = document.getElementById('spin-duration-value');
        const bgImageUrlInput = document.getElementById('bg-image-url');
        const setBgBtn = document.getElementById('set-bg-btn');
        const removeBgBtn = document.getElementById('remove-bg-btn');
        const prizeBannerUrlInput = document.getElementById('prize-banner-image-url');
        const setPrizeBannerBtn = document.getElementById('set-prize-banner-btn');
        const removePrizeBannerBtn = document.getElementById('remove-prize-banner-btn');
        const prizeBannerContainer = document.getElementById('prize-banner-container');
        const prizeBannerImg = document.getElementById('prize-banner-img');
        const adBannerUrlsInput = document.getElementById('ad-banner-urls');
        const adFlipIntervalInput = document.getElementById('ad-flip-interval');
        const adFlipIntervalValue = document.getElementById('ad-flip-interval-value');
        const saveAdSettingsBtn = document.getElementById('save-ad-settings-btn');
        const leftContainer  = document.querySelector('.left-container');
        const rightContainer = document.querySelector('.right-container');

        // --- State ---
        let prizes = [
            { name: 'Prize 1', image: 'https://placehold.co/400x400/3b82f6/ffffff?text=Prize+1' },
            { name: 'Prize 2', image: 'https://placehold.co/400x400/ef4444/ffffff?text=Prize+2' },
            { name: 'Prize 3', image: 'https://placehold.co/400x400/22c55e/ffffff?text=Prize+3' },
            { name: 'Prize 4', image: 'https://placehold.co/400x400/eab308/ffffff?text=Prize+4' },
            { name: 'Prize 5', image: 'https://placehold.co/400x400/8b5cf6/ffffff?text=Prize+5' },
            { name: 'Prize 6', image: 'https://placehold.co/400x400/ec4899/ffffff?text=Prize+6' },
        ];
        let colors = ['#9A0C26', '#ffffff'];
        let spinDuration = 8;
        let spinAngle = 0;
        let isSpinning = false;
        let animationFrameId;
        let prizeBannerUrl = '';
        let adBannerUrls = ['https://placehold.co/300x300/e2e8f0/334155?text=Your+Ad+Here'];
        let adFlipInterval = 5000;
        let currentAdIndex = 0;
        let adCarouselIntervalId;

        // --- Helpers ---
        const getContrastColor = (hexColor) => {
            if (hexColor.startsWith('#')) {
                hexColor = hexColor.slice(1);
            }
            const r = parseInt(hexColor.substr(0, 2), 16);
            const g = parseInt(hexColor.substr(2, 2), 16);
            const b = parseInt(hexColor.substr(4, 2), 16);
            const yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;
            return (yiq >= 128) ? '#000000' : '#FFFFFF';
        };

        // --- Wheel ---
        const drawWheel = () => {
            const numPrizes = prizes.length;
            if (numPrizes === 0) return;
            const arcSize = (2 * Math.PI) / numPrizes;
            const radius = canvas.width / 2;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(radius, radius);
            ctx.rotate(spinAngle);

            for (let i = 0; i < numPrizes; i++) {
                const angle = i * arcSize;
                const bgColor = colors[i % 2];
                ctx.beginPath();
                ctx.fillStyle = bgColor;
                ctx.moveTo(0, 0);
                ctx.arc(0, 0, radius - 5, angle, angle + arcSize);
                ctx.closePath();
                ctx.fill();

                ctx.save();
                ctx.fillStyle = getContrastColor(bgColor);
                ctx.font = 'bold 16px Poppins';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.rotate(angle + arcSize / 2);
                ctx.fillText(prizes[i].name, radius * 0.65, 0);
                ctx.restore();
            }
            ctx.restore();
        };

        // --- Spin ---
        const easeOut = t => 1 - Math.pow(1 - t, 4);
        let startTime = null, startAngle = 0, endAngle = 0;

        const animateSpin = (timestamp) => {
            if (!startTime) startTime = timestamp;
            const progress = Math.min((timestamp - startTime) / (spinDuration * 1000), 1);
            spinAngle = startAngle + (endAngle - startAngle) * easeOut(progress);
            drawWheel();
            if (progress < 1) animationFrameId = requestAnimationFrame(animateSpin);
            else stopSpinning();
        };

        const spin = () => {
            if (isSpinning) return;
            isSpinning = true;

            leftContainer.classList.add('wheel-full');
            rightContainer.classList.add('ad-hidden');

            spinBtn.disabled = true;
            startTime = null;
            startAngle = spinAngle % (2 * Math.PI);

            if (adBanner.style.opacity !== '0') {
                adBanner.style.opacity = '0';
                if (adCarouselIntervalId) clearInterval(adCarouselIntervalId);
            }

            const randomSpins = 5 + Math.random() * 5;
            endAngle = startAngle + (randomSpins * 2 * Math.PI) + (Math.random() * 2 * Math.PI);
            animationFrameId = requestAnimationFrame(animateSpin);
        };

        const stopSpinning = () => {
            isSpinning = false;
            spinBtn.disabled = false;
            cancelAnimationFrame(animationFrameId);
            const finalAngle = (spinAngle % (2 * Math.PI) + 2 * Math.PI) % (2 * Math.PI);
            const winningIndex = Math.floor((2 * Math.PI - finalAngle) / ((2 * Math.PI) / prizes.length)) % prizes.length;
            setTimeout(() => showPrizeModal(prizes[winningIndex]), 500);
        };

        // --- Ad Banner ---
        const updateAdImage = () => {
            if (adBannerUrls.length === 0) { adImageContainer.innerHTML = ''; return; }
            const newImage = document.createElement('img');
            newImage.src = adBannerUrls[currentAdIndex];
            newImage.onerror = () => newImage.src = 'https://placehold.co/300x300/fecaca/991b1b?text=Image+Error';
            newImage.style.opacity = '0';

            const oldImage = adImageContainer.querySelector('img');
            adImageContainer.appendChild(newImage);

            setTimeout(() => newImage.style.opacity = '1', 10);
            if (oldImage) {
                oldImage.style.opacity = '0';
                setTimeout(() => oldImage.remove(), 500);
            }
        };

        const startAdCarousel = () => {
            if (adCarouselIntervalId) clearInterval(adCarouselIntervalId);
            if (adBannerUrls.length > 1) {
                adCarouselIntervalId = setInterval(() => {
                    currentAdIndex = (currentAdIndex + 1) % adBannerUrls.length;
                    updateAdImage();
                }, adFlipInterval);
            }
        };

        // --- Modals ---
        const showPrizeModal = (prize) => {
            prizeResult.textContent = prize.name;
            if (prize.image) {
                wonPrizeImage.src = prize.image;
                wonPrizeImage.classList.remove('hidden');
            } else {
                wonPrizeImage.classList.add('hidden');
            }
            if (prizeBannerUrl) {
                prizeBannerImg.src = prizeBannerUrl;
                prizeBannerContainer.classList.remove('hidden');
            } else {
                prizeBannerContainer.classList.add('hidden');
            }
            prizeModal.classList.remove('hidden');
            setTimeout(() => prizeModal.querySelector('div').classList.remove('scale-95', 'opacity-0'), 10);
            confetti({ particleCount: 150, spread: 180, origin: { y: 0.6 } });
        };

        closePrizeModalBtn.addEventListener('click', () => {
            // Animate and hide the prize modal
            prizeModal.querySelector('div').classList.add('scale-95', 'opacity-0');
            setTimeout(() => prizeModal.classList.add('hidden'), 300);

            // Reset layout back to 50/50
            leftContainer.classList.remove('wheel-full');
            rightContainer.classList.remove('ad-hidden');

            // Show ad banner and restart carousel
            adBanner.style.display = 'flex';
            setTimeout(() => {
                adBanner.style.opacity = '1';
                startAdCarousel();
            }, 10);
        });


        const showSettingsModal = () => {
            settingsModal.classList.remove('hidden');
            setTimeout(() => settingsModal.querySelector('div').classList.remove('scale-95', 'opacity-0'), 10);
        };

        const hideSettingsModal = () => {
            settingsModal.querySelector('div').classList.add('scale-95', 'opacity-0');
            setTimeout(() => settingsModal.classList.add('hidden'), 300);
        };

        // --- Settings ---
        const updatePrizeList = () => {
            prizeListContainer.innerHTML = '';
            prizes.forEach((prize, index) => {
                const prizeEl = document.createElement('div');
                prizeEl.className = 'p-2 bg-gray-100 rounded-lg';
                prizeEl.innerHTML = `
                        <div class="flex justify-between items-center">
                            <span class="font-semibold">${prize.name}</span>
                            <button data-index="${index}" class="remove-prize-btn text-red-500 hover:text-red-700 text-xl">&times;</button>
                        </div>
                        <p class="text-xs text-gray-500 truncate mt-1">${prize.image || 'No image'}</p>
                    `;
                prizeListContainer.appendChild(prizeEl);
            });
            drawWheel();
        };

        prizeListContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-prize-btn')) {
                const index = parseInt(e.target.dataset.index, 10);
                if (prizes.length > 2) {
                    prizes.splice(index, 1);
                    updatePrizeList();
                } else {
                    alert('You must have at least 2 prizes.');
                }
            }
        });

        const addPrize = () => {
            const name = newPrizeNameInput.value.trim();
            const image = newPrizeImageInput.value.trim();
            if (name) {
                prizes.push({ name, image });
                newPrizeNameInput.value = '';
                newPrizeImageInput.value = '';
                updatePrizeList();
            }
        };

        // --- Event Listeners ---
        spinBtn.addEventListener('click', spin);
        openSettingsBtn.addEventListener('click', showSettingsModal);
        closeSettingsModalBtn.addEventListener('click', hideSettingsModal);
        addPrizeBtn.addEventListener('click', addPrize);
        color1Input.addEventListener('input', (e) => { colors[0] = e.target.value; drawWheel(); });
        color2Input.addEventListener('input', (e) => { colors[1] = e.target.value; drawWheel(); });
        spinDurationInput.addEventListener('input', (e) => { spinDuration = parseInt(e.target.value, 10); spinDurationValue.textContent = spinDuration; });
        setBgBtn.addEventListener('click', () => {
            const url = bgImageUrlInput.value.trim();
            if (url) { document.body.style.backgroundImage = `url(${url})`; document.body.style.backgroundSize = 'cover'; document.body.style.backgroundPosition = 'center'; }
        });
        removeBgBtn.addEventListener('click', () => { document.body.style.backgroundImage = ''; bgImageUrlInput.value = ''; });
        setPrizeBannerBtn.addEventListener('click', () => { prizeBannerUrl = prizeBannerUrlInput.value.trim(); alert('Prize banner URL set!'); });
        removePrizeBannerBtn.addEventListener('click', () => { prizeBannerUrl = ''; prizeBannerUrlInput.value = ''; alert('Prize banner removed.'); });

        adFlipIntervalInput.addEventListener('input', e => { adFlipIntervalValue.textContent = e.target.value; });
        saveAdSettingsBtn.addEventListener('click', () => {
            const urls = adBannerUrlsInput.value.split('\n').map(u => u.trim()).filter(u => u);
            adBannerUrls = urls.length > 0 ? urls : ['https://placehold.co/300x300/e2e8f0/334155?text=Your+Ad+Here'];
            adFlipInterval = parseInt(adFlipIntervalInput.value, 10) * 1000;
            currentAdIndex = 0;
            updateAdImage();
            startAdCarousel();
            alert('Ad banner settings saved!');
        });

        // --- Settings Tabs ---
        const tabs = document.getElementById('settings-tabs');
        tabs.addEventListener('click', (e) => {
            if (e.target.classList.contains('tab-btn')) {
                const targetTab = e.target.dataset.tab;
                tabs.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('border-blue-600', 'text-blue-600');
                    btn.classList.add('text-gray-500', 'border-transparent');
                });
                e.target.classList.add('border-blue-600', 'text-blue-600');
                e.target.classList.remove('text-gray-500', 'border-transparent');
                document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.toggle('hidden', pane.id !== `${targetTab}-tab`));
            }
        });

        // --- Initialization ---
        updatePrizeList();
        drawWheel();
        updateAdImage();
        startAdCarousel();
        adBannerUrlsInput.value = adBannerUrls.join('\n');
    });
</script>
</body>
</html>
